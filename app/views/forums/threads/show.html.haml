- content_for(:title) { "#{@thread.title} | Forums" }

.forum-thread.mb-5

  = render 'forums/head', object: @thread

  .row.no-gutters.align-items-center.mb-3

    - if user_can_edit_thread?
      = link_to edit_forums_thread_path(@thread), class: 'btn btn-sm btn-secondary' do
        = inline_svg_tag 'open_iconic/pencil.svg', class: 'icon mr-2'
        %span
          Edit thread

    .status.ml-3
      = present(@thread).status_icons

    - if user_signed_in?
      - subscribed = current_user.forums_subscriptions.where(thread: @thread).exists?
      .ml-auto
        = button_to toggle_subscription_for_forums_thread_path(@thread), method: :patch,
                    class: "btn btn-sm #{subscribed ? 'btn-danger' : 'btn-primary'}" do
          = render subscribed ? 'forums/unsubscribe_btn' : 'forums/subscribe_btn'

  .d-flex.justify-content-end
    = bootstrap_paginate @posts

  - @posts.each do |post|
    = render post, quote_id: 'wmd-input-new-forums-post'

  .d-flex.justify-content-end
    = bootstrap_paginate @posts


  - if user_can_create_post?
    = bootstrap_form_for @post, url: forums_thread_posts_path(@thread, page: @page) do |f|
      = render 'forums/posts/form', f: f

      .row.justify-content-end
        .col-auto
          = f.submit 'Post', class: 'btn btn-primary'
