- if user_can_edit_team?
  = link_to edit_team_path(@team), class: 'btn btn-default pull-right', type: 'button' do
    Settings
    %span.glyphicon.glyphicon-cog

%h1= @team.name

.panel.panel-default
  .panel-heading Info
  .panel-body= markdown @team.description

.panel.panel-default
  .panel-heading Roster
  - if user_can_edit_team?
    .panel-body
      = link_to recruit_team_path(@team), class: 'btn btn-default' do
        Invite
        %span.glyphicon.glyphicon-plus
  %ul.list-group
    - @team.players.each do |user|
      %li.list-group-item
        = link_to user.name, user_path(user)

        - if user == current_user
          .button-group.pull-right
            = button_to leave_team_path(@team), method: :patch, class: 'btn btn-danger' do
              Leave
              %span.glyphicon.glyphicon-remove
        - elsif user_can_edit_team?
          .button-group.pull-right
            = button_to leave_team_path(@team, user_id: user.id),
                        method: :patch, class: 'btn btn-danger' do
              Kick
              %span.glyphicon.glyphicon-remove

.panel.panel-default
  .panel-heading Transfers
  %ul.list-group
    - transfers.each do |transfer|
      %li.list-group-item
        = link_to transfer.user, user_path(transfer.user)
        - if transfer.is_joining?
          joined the team
        - else
          left the team
        on #{transfer.created_at.strftime('%c')}

.panel.panel-default
  .panel-heading Leagues
  %ul.list-group
    - @team.competition_rosters.each do |roster|
      %li.list-group-item
        = link_to 'Signed up', league_roster_path(roster.competition, roster)
        for
        = link_to roster.competition.name, league_path(roster.competition)
        wanting to enter #{roster.division.name}

        - if user_can_edit_team?
          .button-group.pull-right
            = link_to edit_league_roster_path(roster.competition, roster),
                      class: 'btn btn-default' do
              Manage
              %span.glyphicon.glyphicon-cog
